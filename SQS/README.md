# SQS

## 概要
覚書である。順次記載予定。

### キュータイプ
- 標準キュー
  - 無制限のスループット: 標準キューは、API アクションあたり、ほぼ無制限の数の 1 秒あたりのトランザクション (TPS) をサポートします。
  - 少なくとも 1 回の配信: メッセージは少なくとも 1 回は確実に配信されますが、複数のコピーまたはメッセージが配信されることもあります。
  - ベストエフォート型の順序: メッセージが送信されたのとは異なる順序で配信されることがあります。


- FIFOキュー
  - 高スループット: FIFO キューは、1 秒あたり最大 300 件のメッセージ (1 秒あたり 300 件の送信、受信、または削除オペレーション) をサポートします。オペレーションあたり 10 件のメッセージ (最大) というバッチ処理を実行する場合、FIFO キューは 1 秒あたり最大 3,000 件のメッセージをサポートできます。制限の引き上げをリクエストする場合は、サポートリクエストを提出してください。

  - 先入れ先出し方式の配信: メッセージが送信または受信された順序が厳密に保持されます。

  - 1 度きりのプロセス: メッセージは 1 回のみ配信され、コンシューマーが処理して削除するまで使用可能な状態で残り続けます。このキューでは、重複は導入されていません。

### キューの設定  
- キューの属性  
  - デフォルトの可視性タイムアウト  
    - VisibilityTimeout  
    - 0 秒～12 時間  
    - キューから受信したメッセージが他の受信コンポーネントから見えない時間の長さ（秒）です。  
  
  - メッセージ保持期間  
    - MessageRetentionPeriod  
    - 1 分～14 日  
    - メッセージが削除されない場合に Amazon SQS で保持される時間です。  
  
  - 最大メッセージサイズ  
    - MaximumMessageSize  
    - 1～256 KB   
    - Amazon SQS が受け付ける最大メッセージサイズ（バイト）です。  
  
  - 配信遅延  
    - DelaySeconds   
    - 0 秒～15 分  
    - このキューに追加されたすべてのメッセージの初回配信の遅延時間です。  
  
  - メッセージ受信待機時間  
    - ReceiveMessageWaitTimeSeconds  
    - 0 秒～20 秒  
    - ロングポーリング受信呼び出しが空の応答を返すまでに、メッセージが利用可能になるまで待機する最大時間です。  
    - ロングポーリングを利用することでメッセージの受信リクエスト回数を減らしコストを抑制  
 
- デッドレターキュー設定  
  - 再処理ポリシーの使用   
    - RedrivePolicy   
    - 有無  
    - 最大受信数を超えた後、メッセージはデッドレターキューに送信されます。  
  - デッドレターキュー  
    - キュー名  
  - 最大受信数  
    - maxreceivecount  
    -  1～1000   
    - デッドレターキューに送信されるまでにメッセージを受信できる最大回数です。  
    
